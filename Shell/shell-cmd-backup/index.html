<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>shell cmd backup | ETAF's Blog</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/pure-min.css"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">shell cmd backup</h1><a id="logo" href="/.">ETAF's Blog</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="icon-home"> Home</i></a><a href="/archives/"><i class="icon-archive"> Archive</i></a><a href="/about/"><i class="icon-about"> About</i></a><a href="/atom.xml"><i class="icon-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">shell cmd backup</h1><div class="post-meta">2015-03-27 | <span class="categories">Categorized in<a href="/categories/Shell/"> Shell</a></span></div><span data-disqus-identifier="Shell/shell-cmd-backup/" class="disqus-comment-count"></span><div class="post-content"><blockquote>
<p>To see etaf belongs to which group:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groups etaf</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<a id="more"></a>
<blockquote>
<p>Change etaf’s default group to new_group:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -g new_group etaf</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>add a group for etaf:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod <span class="operator">-a</span> -G new_group etaf</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>find all the core file and remove them<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ~ -regex <span class="string">".*core\.[0-9]*"</span> | xargs rm</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>redirect  stderr to file<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd <span class="number">2</span>&gt; stderr.txt</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>redirect stdout and stderr to file<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmd &gt;file <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="comment">##first redirect stderr to stdout , then redirect stdout to file</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>vim replace<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/origin_pattern/new_string/cig</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>kill multi process with one line<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> $(ps aux | grep <span class="string">'[p]ython csp_build.py'</span> | awk <span class="string">'&#123;print $2&#125;'</span>)</span><br><span class="line">Details on its workings are as follows:</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><strong>first try kill -15 $(….)</strong><br><strong>if not help try kill -9</strong></p>
<ul>
<li>The ps gives you the list of all the processes.</li>
<li>The grep filters that based on your search string, [p] is a trick to stop you picking up the actual grep process itself.</li>
<li>The awk just gives you the second field of each line, which is the PID.</li>
<li>The $(x) construct means to execute x then take its output and put it on the command line. The output of that ps pipeline inside that construct above is the list of process IDs so you end up with a command like kill 1234 1122 7654.</li>
</ul>
<hr>
<blockquote>
<p>run command without shell<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup <span class="built_in">command</span> &amp;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>format code<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">indent -linux x.cpp</span><br><span class="line">or:</span><br><span class="line">clang-format -i -style=xxx *.cpp</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>arp scan<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo arp-scan -I eth0 <span class="operator">-l</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>find excutabe file<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find -type f -perm /u=x -exec ls <span class="operator">-l</span> &#123;&#125; \;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>find ip of a ASUS server which has open port 80;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo arp-scan <span class="operator">-l</span> | grep ASUS | awk <span class="string">'&#123;print $1&#125;'</span> | xargs nmap -p <span class="number">80</span> | grep -A <span class="number">1</span> -B <span class="number">3</span> <span class="string">"open"</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>use tail to monitor a file<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail <span class="operator">-f</span> &lt;file&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>make a port(for example 80) pass firewall on centos7<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --zone=public --add-port=<span class="number">80</span>/tcp --permanent</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p>what does up time same?<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uptime</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>output:</p>
<table>
<thead>
<tr>
<th style="text-align:left">current time</th>
<th style="text-align:left">up duration</th>
<th style="text-align:left">user connections</th>
<th style="text-align:left">load average:</th>
<th style="text-align:left">last 1 min</th>
<th style="text-align:left">last 5 min</th>
<th style="text-align:left">last 15 min</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">23:22:03</td>
<td style="text-align:left">up 6 days, 14:44,</td>
<td style="text-align:left">1 user,</td>
<td style="text-align:left">load average:</td>
<td style="text-align:left">0.00,</td>
<td style="text-align:left">0.01,</td>
<td style="text-align:left">0.05</td>
</tr>
</tbody>
</table>
<p>load: means the length of queue waiting for CPU plus the number of running process.</p>
<p>$$<br>load(t) = load(t-1) e^(-5/60) + n (1 - e^(-5/60))<br>$$<br>here n means the sum of number of running and waiting process.</p>
<hr>
</div><div class="tags"></div><div class="post-nav"><a href="/Shell/usage-of-linux-cmd-scp/" class="pre"><i class="icon-previous">Usage of linux cmd scp</i></a><a href="/Git/git-cmd-backup/" class="next">git cmd backup<i class="icon-next"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = 'etaf';
var disqus_identifier = 'Shell/shell-cmd-backup/';
var disqus_title = 'shell cmd backup';
var disqus_url = 'http://blog.etaf.me/Shell/shell-cmd-backup/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//etaf.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="sitesearch" value="http://blog.etaf.me"/></form></div><div class="widget"><div class="widget-title">Categories</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Project/">Project</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shell/">Shell</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System-Maintenance/">System-Maintenance</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vim/">Vim</a></li></ul></div><div class="widget"><div class="widget-title">Tags</div><div class="tagcloud"><a href="/tags/O-n/" style="font-size: 15px;">O(n)</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a></div></div><div class="widget"><div class="widget-title">Recent</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/Shell/bash-review/">bash review</a></li><li class="post-list-item"><a class="post-list-link" href="/C/c-plus-plus-redefine-overload-override/">C++: redefine overload override</a></li><li class="post-list-item"><a class="post-list-link" href="/uncategorized/a-simple-implement-of-kmp/">a simple implementation of KMP</a></li><li class="post-list-item"><a class="post-list-link" href="/C/singleton-in-c-plus-plus/">singleton in C++</a></li><li class="post-list-item"><a class="post-list-link" href="/System-Maintenance/centos-certificate-not-work/">centos certificate not work</a></li><li class="post-list-item"><a class="post-list-link" href="/Vim/latest-vim-with-youcompleteme/">latest vim with youcompleteme</a></li><li class="post-list-item"><a class="post-list-link" href="/Project/qnds-my-dig/">qnds: my dig</a></li><li class="post-list-item"><a class="post-list-link" href="/Algorithm/max-subarray-sum-with-one-swap/">Max subarray sum with one swap</a></li><li class="post-list-item"><a class="post-list-link" href="/Algorithm/find-max-interval/">Find max interval</a></li><li class="post-list-item"><a class="post-list-link" href="/Algorithm/container-with-most-water/">Container With Most Water</a></li></ul></div><div class="widget"><div class="widget-title">Recent Comments</div><script type="text/javascript" src="//etaf.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><!--.widget-title= __('blogroll')--><div class="widget-title">Find Me</div><ul></ul><a href="https://github.com/etaf/" title="github" target="_blank">github</a><ul></ul><a href="https://gist.github.com/etaf/" title="gist" target="_blank">gist</a></div></div></div></div><div id="footer">© <a href="/." rel="nofollow">ETAF's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/totop.js" type="text/javascript"></script><script src="/js/fancybox.pack.js" type="text/javascript"></script>
<script src="/js/jquery.fancybox.js" type="text/javascript"></script><link rel="stylesheet" href="/css/jquery.fancybox.css" type="text/css"></div></body></html>